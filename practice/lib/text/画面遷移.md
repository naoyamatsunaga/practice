## GoRouterで画面遷移を実装する（基礎）

このドキュメントでは、**GoRouterの基本的な画面遷移**について、最短で理解できるように解説します。
ボトムナビと組み合わせた構成は `lib/text/ボトムナビゲーションバー.md` を参照してください。

---

### 1. 依存関係（確認）
`go_router` は `pubspec.yaml` に追加してください。未取得の場合は `flutter pub get` を実行します。

```yaml
dependencies:
  flutter:
    sdk: flutter
  go_router: ^14.6.2
```

---

### 2. ルーターを作成する
まずはシンプルな3画面（Home / 設定 / カラーパレット）のルートを定義します。

```dart
import 'package:go_router/go_router.dart';
import 'home.dart';
import 'settings_page.dart';
import 'color_palette_page.dart';

final router = GoRouter(
  initialLocation: '/home',
  routes: [
    GoRoute(
      path: '/home',
      builder: (context, state) => const Home(),
    ),
    GoRoute(
      path: '/settings',
      builder: (context, state) => const SettingsPage(),
    ),
    GoRoute(
      path: '/colors',
      builder: (context, state) => const ColorPalettePage(),
    ),
  ],
);
```

---

### 3. `MaterialApp.router` へ接続する
`routerConfig` に上で作成した `router` を渡します。

```dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      routerConfig: router,
    );
  }
}
```

---

### 4. 画面遷移の書き方（go / push / pop）
- `go`（置き換え遷移）: 画面を置き換える。戻るで戻らせたくない時に便利。
  ```dart
  context.go('/settings');
  ```
- `push`（積み上げ遷移）: 戻るで戻れるように履歴を積む。
  ```dart
  context.push('/colors');
  ```
- `pop`（戻る）:
  ```dart
  context.pop();
  ```

---

### 5. ミニサンプル：設定 → カラーパレットへ
`SettingsPage` から `/colors` へ push する例です。

```dart
ElevatedButton(
  onPressed: () => context.push('/colors'),
  child: const Text('カラーパレットへ'),
)
```

---

### 6. よくあるハマりどころ
- `MaterialApp.router` を使わないと `GoRouter` が有効にならない
- ルートパスのタイプミス（例: `/home` と `/homes`）
- import 漏れ（`package:go_router/go_router.dart`）

---

ボトムナビと組み合わせる手順は `lib/text/ボトムナビゲーションバー.md` を参照してください。

---

### 7. 実行手順
1. 依存関係の取得
   ```bash
   flutter pub get
   ```
2. 実行
   ```bash
   flutter run
   ```

---

### 9. よくあるハマりどころ
- `MaterialApp.router` を使わずに `MaterialApp` のままだとルーターが適用されません
- `go_router` の import を忘れると `context.push` や `GoRouter` が使えません
- ルートパスのタイプミス（`/home` と `/homes` など）に注意しましょう

---

これで、ボトムナビ（Home / 設定）と、設定→カラーパレットへの画面遷移がGoRouterで実装できています。必要に応じてルートを追加し、同様の手順で機能を拡張できます。


